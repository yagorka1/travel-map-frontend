<div class="w-full p-4">
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
    <div class="w-1/2">
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">
        {{ 'profile.edit_profile' | translate }}
      </h2>

      <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
        <div class="flex flex-col items-center mb-6 pb-6 border-b border-gray-200 dark:border-gray-700">
          <div class="relative mb-4">
            <lib-avatar
              [src]="currentProfile?.avatarUrl"
              [name]="currentProfile?.name || 'User'"
              size="xl"
              alt="Profile avatar"
            />
          </div>
          <input type="file" id="avatar" accept="image/*" (change)="onFileSelected($event)" #fileInput class="hidden" />
          <button
            type="button"
            (click)="fileInput.click()"
            class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"
          >
            {{ 'profile.change_avatar' | translate }}
          </button>
        </div>

        <div class="mb-6">
          <lib-input
            formControlName="name"
            [label]="'profile.name' | translate"
            [placeholder]="'profile.enter_your_name' | translate"
            [type]="'text'"
            autocomplete="name"
          ></lib-input>
        </div>

        <div class="mb-6">
          <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
            {{ 'profile.email' | translate }}
          </label>
          <input
            type="email"
            id="email"
            [value]="currentProfile?.email || ''"
            readonly
            disabled
            class="bg-gray-100 border border-gray-300 text-gray-500 text-sm rounded-lg block w-full p-2.5 cursor-not-allowed dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400"
          />
          <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">
            {{ 'profile.email_cannot_be_changed' | translate }}
          </p>
        </div>

        <lib-select
          formControlName="language"
          [label]="'profile.language' | translate"
          [options]="languages"
        ></lib-select>

        <button
          type="submit"
          [disabled]="profileForm.invalid"
          class="w-full text-white bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-purple-300 dark:focus:ring-purple-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {{ 'profile.save_changes' | translate }}
        </button>
      </form>
    </div>
  </div>
</div>
